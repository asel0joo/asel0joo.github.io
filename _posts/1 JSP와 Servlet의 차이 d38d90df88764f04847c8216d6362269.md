# 1.JSP와 Servlet의 차이

- JSP와 Servlet의 차이
    - Servlet
        - java코드 안에 html코드
        - data pocessing(Controller)에 좋음
        - 즉, DB와의 통신, 데이터를 읽고 확인하는 작업 등에 유용함
        - Servlet이 수정된 경우 java코드를 컴파일 한 후 동적인 페이지를 처리하기 때문에 전체 코드를 업데이트하고 다시 컴파일한 후 재배포 하는 작업이 필요함(개발 생산성 저하)
    - JSP
        - 자바 언어 기반의 server side 스크립트 언어
        - html코드 안에 java코드
        - servlet 보완하고 기술확장함
            - Servlet의 모든 기능 + 추가기능
        - presentation(View)에 좋음
        - 즉 요청 결과를 나타내는 html 작성하는데 유용함
        - jsp가 수정된 경우 재배포할 필요가 없이 WAS가 알아서 처리함(쉬운 배포)
    - 그렇다면, jsp만 사용하면 되지 왜 두가지를 같이 사용함?
        - Servlet은 자바코드 안에 html을 일일이 기입해야 함 → 유지보수하기 어려움 → 이를 보안하기 위해 나온 기술이 바로 JSP임
        - JSP는 html안에 자바코드를 작성하여 동적인 웹페이지를 제공할 수 있음 → 하지만, JSP 코드를 보면 Java 코드, 데이터를 조회하는 리포지토리 등등 다양한 코드가 모두 JSP에 노출되어 있기때문에 유지 보수하기에는 서블릿보다는 낫지만 그래도 아주힘듦
        - 서블릿과 JSP 보완한 MVC패턴의 등장
            - MVC 패턴은 컨트롤러와 뷰, 모델 영역으로 역할을 나눔
            - 컨트롤러는 HTTP요청을 받아 파라미터를 검증하고 비지니스 로직을 실행함. 그리고 뷰에 전달할 결과 데이터를 조회해 모델에 넣음
            - 모델은 뷰에 출력할 데이터를 담아둠
            - 뷰는 모델에 담겨있는 데이터를 사용해 화면에 그리는 일을 함. html 부분 생성
                
                ![1.PNG](1%20JSP%E1%84%8B%E1%85%AA%20Servlet%E1%84%8B%E1%85%B4%20%E1%84%8E%E1%85%A1%E1%84%8B%E1%85%B5%20d38d90df88764f04847c8216d6362269/1.png)
                
                ```java
                // Controller
                @WebServlet(name = "mvcMemberSaveServlet", urlPatterns = "/servlet-mvc/members/save")
                public class MvcMemberSaveServlet extends HttpServlet {
                
                    private final MemberRepository memberRepository = MemberRepository.getInstance();
                
                    @Override
                    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
                        final String username = request.getParameter("username");
                        final int age = Integer.parseInt(request.getParameter("age"));
                        final Member member = new Member(username, age);
                        memberRepository.save(member);
                
                        request.setAttribute("member", member);
                        final String viewPath = "/WEB-INF/views/save-result.jsp";
                        final RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
                        dispatcher.forward(request, response);
                    }
                }
                
                // View
                <%@ page contentType="text/html;charset=UTF-8" language="java" %>
                <html>
                <head>
                    <title>Title</title>
                </head>
                <body>
                성공
                <ul>
                    <li>id=${member.id}
                    </li>
                    <li>username=${member.username}
                    </li>
                    <li>age=${member.age}
                    </li>
                </ul>
                <a href="/index.html">메인</a>
                </body>
                </html>
                ```
                
                서블릿에서 비즈니스 로직을 수행하고 뷰에 그릴 객체를 담아서 뷰에 보냅니다. 뷰로 이동하는 코드는 dispatcher.forward()를 사용합니다. 그러면 JSP는 서블릿에 있는 데이터를 가져와서 출력만 합니다.